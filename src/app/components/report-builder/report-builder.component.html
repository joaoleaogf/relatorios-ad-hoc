<div class="builder-container">
  <h2>Relatório Ad Hoc de Veículos</h2>

  <div class="filters">
    <label>Marca:
      <select [(ngModel)]="selectedMarca" (change)="filtrarModelos()">
        <option [value]="null">Todas</option>
        <option *ngFor="let marca of marcas" [value]="marca.id">{{ marca.nome }}</option>
      </select>
    </label>

    <label>Modelo:
      <select [(ngModel)]="selectedModelo">
        <option [value]="null">Todos</option>
        <option *ngFor="let modelo of modelosFiltrados" [value]="modelo.id">{{ modelo.nome }}</option>
      </select>
    </label>

    <label>Ano:
      <select [(ngModel)]="selectedAno">
        <option [value]="null">Todos</option>
        <option *ngFor="let ano of anos" [value]="ano">{{ ano }}</option>
      </select>
    </label>

    <label>Nome contém:
      <input [(ngModel)]="nomeVeiculo" placeholder="Ex: Palio" />
    </label>

    <div class="buttons">
      <button (click)="gerarRelatorio()">Gerar</button>
      <button (click)="limparFiltros()">Limpar</button>
      <button (click)="exportarCSV()" [disabled]="resultado.length === 0">Exportar CSV</button>
    </div>
  </div>

  <p *ngIf="resultado.length > 0">{{ resultado.length }} resultados encontrados</p>

  <app-result-table [dados]="resultado"></app-result-table>
</div>
